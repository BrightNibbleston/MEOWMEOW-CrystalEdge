- type: entity
  parent: CEFoodPumpkin
  id: CEHalloweenPumpkin
  name: scary pumpkin
  description: It was a normal pumpkin one day... Now it's a scary pumpkin!
  components:
  - type: Sprite
    sprite: _CE/Objects/Decorations/halloween_pumpkin.rsi
    layers:
      - state: base1
        map: [ "random" ]
  - type: RandomSprite
    available:
      - random:
          base1: ""
          base2: ""
          base3: ""
          base4: ""
  - type: IdentityBlocker
  - type: Clothing
    quickEquip: false
    sprite: _CE/Clothing/Head/Misc/halloween_pumpkin_helmet.rsi
    equippedPrefix: 0
    slots:
    - HEAD

# The reason, why i don't make a child from CEFoodPumpkin is simple - CEFoodPumpkin has a randomsprite, which is copied to this base prototype
- type: entity
  parent: FoodInjectableBase
  id: CEHalloweenPumpkinEmmisiveBase
  name: jack-o lantern
  description: Oooh! Scary!
  abstract: true
  components:
  - type: Sprite
    sprite: _CE/Objects/Decorations/halloween_pumpkin.rsi
  - type: PointLight
    radius: 2.1
    energy: 0.9
    color: "#FEE68E"
    castShadows: true
  - type: Item
    size: Normal
  - type: FlavorProfile
    flavors:
      - pumpkin
  - type: SolutionContainerManager
    solutions:
      food:
        maxVol: 30
        reagents:
        - ReagentId: CENutriment
          Quantity: 12
  - type: SliceableFood
    count: 5
    sliceTime: 2
    slice: CEFoodPumpkinSlice
  - type: CEFoodTag
    tags:
    - CEVegetable
    - CEPumpkin


- type: entity
  parent: CEHalloweenPumpkinEmmisiveBase
  id: CEJackOLanternVariant1
  suffix: Variant 1
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
      - state: base1
      - state: light-base1
        shader: unshaded
      - state: light-base1
        shader: shaded
      # This is needed to make pumpkin's face to have that emmisive light from the head.
      # Refer to ClothingOuterVestHazard for more details about it

- type: entity
  parent: CEHalloweenPumpkinEmmisiveBase
  id: CEJackOLanternVariant2
  suffix: Variant 2
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
      - state: base2
      - state: light-base2
        shader: unshaded
      - state: light-base2
        shader: shaded

- type: entity
  parent: CEHalloweenPumpkinEmmisiveBase
  id: CEJackOLanternVariant3
  suffix: Variant 3
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
      - state: base3
      - state: light-base3
        shader: unshaded
      - state: light-base3
        shader: shaded

- type: entity
  parent: CEHalloweenPumpkinEmmisiveBase
  id: CEJackOLanternVariant4
  suffix: Variant 4
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
      - state: base4
      - state: light-base4
        shader: unshaded
      - state: light-base4
        shader: shaded

- type: entity
  id: CEJackOLantern
  parent: MarkerBase
  name: jack-o lantern spawner
  description: Oooh! Scary!
  categories: [ ForkFiltered ]
  components:
  - type: Sprite
    layers:
      - state: green
      - sprite: _CE/Objects/Decorations/halloween_pumpkin.rsi
        state: base2
      - sprite: _CE/Objects/Decorations/halloween_pumpkin.rsi
        state: light-base2
  - type: EntityTableSpawner
    table: !type:NestedSelector
      tableId: CEJackOLanternTable

- type: entityTable
  id: CEJackOLanternTable
  table: !type:GroupSelector
    children:
    - id: CEJackOLanternVariant1
    - id: CEJackOLanternVariant2
    - id: CEJackOLanternVariant3
    - id: CEJackOLanternVariant4
